<html>
  <head>
    <title>Demos for http://4ydx.com</title>
    <meta name="keywords" content="4ydx, programming, perl, c, php, ruby, mojolicious, rails, html, css, json, javascript, github, jquery">
    <meta name="description" content="Programming for fun and freedom.">
    <script type="text/javascript" src="js/jquery-1.7.js"></script>
    <script type="text/javascript" src="js/jquery.messaging.js"></script>
    <script>
      function send_message() {
        $("#test_iframe").messaging('send', $("#message").val());
      }
      function received(event, data) {
        $("#reply_message").hide().html(data).fadeIn();
      }
      $(document).ready(function() {
        $("#url").html(document.domain);
        $("#test_iframe").messaging('init', 
        { 'state' : 'send_and_receive', 'domain' : 'http://demo.japanified.com',
          'received' : received });
      });
    </script>
    <style>
      iframe {
        width: 90%;
      }
      center {
        text-align: left;
      }
      button {
        margin-bottom: 15px;
      }
      span {
        color: green;
      }
    </style>
  </head>
  <body>
    <center>
      <p>Visit <a href="http://4ydx.com/articles/2011/10/article.html#cut">http://4ydx.com</a> for details and 
      <a href="https://github.com/4ydx">https://github.com/4ydx</a> for code.</p>
      <form onsubmit="send_message(); return false;">
        Current Domain: <span id="url"></span>
        <br>
        Send Message: <input id="message" type="text"></input>
        <br>
        <input type="submit" value="Send" />
      </form>
      <!-- 
      You can do cross domain messaging with this!
      You can see the full power of messaging by pointing src at a different domain.
      -->
      <br>
      <iframe id="test_iframe" src="http://demo.japanified.com/receiver.html"></iframe>
      <br>
      <p>Reply Back: "<span id="reply_message"></span>"</p>
      <br>
      <a href="http://demo.4ydx.com">Back</a>
    </center>
  </body>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5525895-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</html>
